---
import { PostsData } from "../constants";
import PostCard from "./PostCard.astro";
import LinkButton from "./LinkButton.astro";
---

<section id="posts">
  <h2>My Posts</h2>
  <div class="pt-8 flex flex-wrap">
    {
      PostsData.filter((item) => item?.cover_image)
        .sort(() => Math.random() - 0.5)
        .slice(0, 6)
        .map(
          ({
            title,
            cover_image,
            url,
            description,
            published_at,
            public_reactions_count,
            comments_count,
            reading_time_minutes,
          }) => (
            <PostCard
              title={title}
              cover_image={cover_image}
              url={url}
              description={description}
              published_at={published_at}
              public_reactions_count={public_reactions_count}
              comments_count={comments_count}
              reading_time_minutes={reading_time_minutes}
            />
          )
        )
    }
  </div>
  {
    PostsData.length > 6 && (
      <div class="flex justify-center mt-5 lg:mt-12">
        <LinkButton
          className="hover:text-skin-accent underline underline-offset-4 decoration-dashed"
          href="/posts"
        >
          View more >
        </LinkButton>
      </div>
    )
  }
</section>

<style>
  /* ===== posts Section ===== */
  #posts {
    @apply mb-1 ml-1 py-12;
  }
  h2:before {
    content: "#";
    @apply mr-2;
  }

  h2 {
    @apply text-lg font-bold mb-4;
  }
</style>
